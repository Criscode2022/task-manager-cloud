<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-button
      slot="start"
      class="invisible ion-margin"
      id="delete-alert"
      color="danger"
    >
      <ion-icon name="trash-outline"></ion-icon>
    </ion-button>
    <ion-title class="ion-text-center"> Task Manager </ion-title>
    <ion-button slot="end" class="invisible ion-margin" color="primary">
      <ion-icon name="filter-outline"></ion-icon>
    </ion-button>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <img
    src="assets/background-image.svg"
    class="absolute bottom-10 right-2 opacity-40"
    alt="soft background image of a girl and sunflowers"
  />

  <p class="m-4 font-bold z-10">Save your tasks to the cloud</p>

  <ion-button color="primary" (click)="upload()" class="p-4">
    <ion-icon name="save"></ion-icon>
  </ion-button>

  @if (loading() === true) {
  <ion-spinner name="crescent"></ion-spinner>

  } @if (userId() && loading() === false) {

  <div class="px-4 py-6">
    <p class="px-4"><strong>Your user ID : {{userId()}}</strong></p>
    <p class="px-4">Use this user ID to import your tasks on any device</p>
  </div>
  } @if (messageUpload() && loading() === false) {

  <div class="p-8">
    <strong class="text-red-600">{{messageUpload()}}</strong>
  </div>
  }

  <p class="m-4 font-bold z-10">Get your tasks from the cloud</p>

  <ion-button color="primary" id="download-alert" class="p-4">
    <ion-icon name="cloud-download"></ion-icon>
  </ion-button>

  @if (messageDownload() === 'success') {

  <div class="p-8">
    <strong class="text-green-600"> Tasks downloaded correctly! </strong>
  </div>

  } @if (messageDownload() === 'error') {

  <div class="p-8">
    <strong class="text-red-600"> That user ID doesn't exist </strong>
  </div>
  }

  <ion-alert
    trigger="download-alert"
    header="Import tasks"
    message="Important: This will overwrite your current tasks"
    [buttons]="alertButtonsDownload"
    [inputs]="alertInputs"
  ></ion-alert>
</ion-content>
