<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title> Task Manager </ion-title>
    <div slot="end">
      <ion-button class="invisible" id="delete-alert" color="danger">
        <ion-icon name="trash-outline"></ion-icon>
      </ion-button>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <p class="m-4 font-bold">Save your tasks to the cloud</p>

  <ion-button color="primary" (click)="upload()" class="p-4">
    <ion-icon name="save"></ion-icon>
  </ion-button>

  @if (this.loading() === true) {
  <ion-spinner name="crescent"></ion-spinner>

  } @if (this.userId() && this.loading() === false) {

  <div class="px-4 py-12">
    <p class="my-2 px-4"><strong>Your user ID : {{this.userId()}}</strong></p>
    <p class="my-2 px-4">Use this user ID to import your tasks on any device</p>
  </div>
  } @if (this.messageUpload() && this.loading() === false) {

  <div class="p-8">
    <strong class="text-red-600">{{this.messageUpload()}}</strong>
  </div>
  }

  <p class="m-4 font-bold">Get your tasks from the cloud</p>

  <ion-button color="primary" id="download-alert" class="p-4">
    <ion-icon name="cloud-download"></ion-icon>
  </ion-button>

  @if (this.messageDownload() === 'success') {

  <div class="p-8">
    <strong class="text-green-600"> Tasks downloaded correctly! </strong>
  </div>

  } @if (this.messageDownload() === 'error') {

  <div class="p-8">
    <strong class="text-red-600"> That user ID doesn't exist </strong>
  </div>
  }

  <ion-alert
    trigger="download-alert"
    header="Import tasks"
    message="Important: This will overwrite your current tasks"
    [buttons]="alertButtonsDownload"
    [inputs]="alertInputs"
  ></ion-alert>
</ion-content>
