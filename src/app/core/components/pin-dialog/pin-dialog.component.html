<div class="pin-dialog-container">
  <div class="dialog-header">
    <ion-icon name="shield-checkmark" class="header-icon warning-icon"></ion-icon>
    <h2 class="dialog-title">Important Security Information</h2>
  </div>

  <div class="dialog-content">
    <div class="warning-banner">
      <ion-icon name="warning" class="banner-icon"></ion-icon>
      <p class="warning-text">
        Save this PIN in a secure location. You'll need it to access your tasks on other devices.
      </p>
    </div>

    <div class="pin-container">
      <p class="pin-label">Your Login PIN</p>
      <div class="pin-display-wrapper">
        <p class="pin-display">{{ pin }}</p>
        <ion-button
          fill="clear"
          class="copy-button"
          (click)="copyPin()"
          matTooltip="Copy to clipboard (optional)"
        >
          <ion-icon slot="icon-only" [name]="copied ? 'checkmark-circle' : 'copy-outline'"></ion-icon>
        </ion-button>
      </div>
      @if (copied) {
        <p class="copy-success">âœ“ PIN copied to clipboard!</p>
      }
    </div>

    <div class="info-box">
      <ion-icon name="information-circle-outline" class="info-icon"></ion-icon>
      <p class="info-text">
        This PIN cannot be recovered after closing this dialog. Write it down on paper or copy it to a secure location.
      </p>
    </div>

    <div class="confirmation-checkbox">
      <ion-checkbox
        [(ngModel)]="confirmed"
        class="custom-checkbox"
        labelPlacement="end"
      >
        <span class="checkbox-label">I have saved my PIN securely</span>
      </ion-checkbox>
    </div>
  </div>

  <div class="dialog-actions">
    <ion-button
      expand="block"
      color="primary"
      (click)="close()"
      class="close-button"
      [disabled]="!confirmed"
    >
      <ion-icon slot="start" name="checkmark"></ion-icon>
      Continue
    </ion-button>
    <p class="action-hint" *ngIf="!confirmed">Please confirm you've saved your PIN</p>
  </div>
</div>
