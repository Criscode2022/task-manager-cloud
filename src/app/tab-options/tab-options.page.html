<ion-header>
  <ion-toolbar>
    <ion-button
      aria-label="delete button"
      slot="start"
      class="invisible ion-margin"
    >
      <ion-icon name="trash-outline"></ion-icon>
    </ion-button>
    <ion-title class="lg:relative lg:left-4 ion-text-center">
      Task Manager
    </ion-title>
    <ion-button
      aria-label="information button"
      slot="end"
      id="info-alert"
      color="primary"
      class="ion-margin w-20"
    >
      <ion-icon name="information"></ion-icon>
    </ion-button>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <img
    src="assets/background-image.svg"
    class="absolute bottom-10 right-2 opacity-20"
    alt="soft background image of a girl and sunflowers"
  />

  @if (!userId() && !loading()) {

  <p class="m-4 font-bold">Upload tasks</p>

  <ion-button
    aria-label="upload button"
    color="primary"
    class="m-4"
    (click)="upload()"
  >
    <ion-icon name="cloud-upload"></ion-icon>
  </ion-button>

  } @if (loading()) {
  <ion-spinner aria-label="loading spinner" name="crescent"></ion-spinner>

  } @if (userId() && !loading()) {

  <p class="m-4 float-right"><strong>Your user ID : {{userId()}}</strong></p>

  } @if (messageUpload() && !loading()) {

  <div class="p-8">
    <strong class="text-red-600">{{messageUpload()}}</strong>
  </div>
  }

  <p class="m-4 font-bold">Download tasks</p>

  <ion-button
    aria-label="download button"
    color="primary"
    class="m-4"
    id="download-alert"
  >
    <ion-icon name="cloud-download"></ion-icon>
  </ion-button>

  @if (messageDownload() === 'success') {

  <div class="p-4">
    <strong class="text-green-700"> Tasks downloaded correctly! </strong>
  </div>

  } @if (messageDownload() === 'not found') {

  <div class="p-4">
    <strong class="text-red-700"> User ID doesn't exist </strong>
  </div>

  } @if (messageDownload() === 'error') {

  <div class="p-4">
    <strong class="text-red-600"> Server error, please try again </strong>
  </div>
  }

  <ion-alert
    trigger="download-alert"
    header="Import tasks"
    message="IMPORTANT: This will OVERWRITE your current tasks"
    [buttons]="alertButtonsDownload"
    [inputs]="alertInputs"
  ></ion-alert>

  <ion-alert
    trigger="info-alert"
    header="Information"
    message="Upload the tasks to get an user ID, which you can use to sync your tasks on any device. Tasks are automatically
      synced on changes until you delete your user ID"
    [buttons]="alertButtonsInfo"
  ></ion-alert>

  @if (userId()) {

  <p class="m-4 font-bold">Delete your User ID</p>

  <ion-button
    aria-label="delete button"
    color="danger"
    class="m-4"
    id="delete-user-alert"
  >
    <ion-icon name="trash"></ion-icon>
  </ion-button>

  <ion-alert
    trigger="delete-user-alert"
    header="Delete User ID"
    message="Are you sure you want to delete your User ID? This will delete all your tasks from the cloud but will keep them in the devices"
    [buttons]="alertButtonsDelete"
  ></ion-alert>

  }
</ion-content>
